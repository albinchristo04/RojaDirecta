---
import Layout from '../layouts/Layout.astro';
import MatchCard from '../components/MatchCard.astro';
import { getMatches } from '../utils/data';
import { getRotatingTitle } from '../utils/seo';

export async function getStaticPaths() {
  const hubs = [
    { 
      slug: 'futbol-hoy', 
      title: 'Fútbol Hoy En Vivo - Partidos de Hoy Gratis Online',
      h1: 'Ver Fútbol Hoy En Vivo Gratis',
      league: null 
    },
    { 
      slug: 'champions-league', 
      title: 'Champions League En Vivo - Ver Liga de Campeones Gratis',
      h1: 'Champions League En Vivo Hoy',
      league: 'Champions League' 
    },
    { 
      slug: 'laliga', 
      title: 'LaLiga En Vivo - Ver Fútbol Español Gratis Online',
      h1: 'LaLiga EA Sports En Vivo',
      league: 'LaLiga' 
    },
    { 
      slug: 'premier-league', 
      title: 'Premier League En Vivo - Ver Fútbol Inglés Gratis',
      h1: 'Premier League En Vivo Hoy',
      league: 'Premier League' 
    },
    { 
      slug: 'canales-deportivos', 
      title: 'Canales Deportivos En Vivo - ESPN, Fox Sports, Movistar',
      h1: 'Canales de Deportes En Vivo Gratis',
      league: null 
    }
  ];

  return hubs.map((hub) => ({
    params: { hub: hub.slug },
    props: { hub },
  }));
}

const { hub } = Astro.props;
const matches = await getMatches();
const filteredMatches = hub.league 
  ? matches.filter(m => m.league && m.league.toLowerCase().includes(hub.league.toLowerCase()))
  : matches;

const title = getRotatingTitle(hub.title, 'hub');
const description = `Sigue la ${hub.title} en vivo y en directo. Los mejores enlaces para ver fútbol online gratis sin cortes. Roja Directa, Tarjeta Roja y más.`;
---

<Layout title={title} description={description} headerTitle={hub.h1.toUpperCase()}>
    <div class="container">

        <div class="schedule-box">
            <div class="schedule-header">
                {hub.h1}
            </div>
            <div class="matches-list">
                {filteredMatches.length > 0 ? (
                    filteredMatches.map((match) => (
                        <MatchCard match={match} />
                    ))
                ) : (
                    <div class="no-matches">No hay partidos programados para esta categoría en este momento.</div>
                )}
            </div>
        </div>




        <article class="hub-content">
            <div class="content-box">
                <h2>Guía completa para ver {hub.h1} online</h2>
                <p>
                    Si eres un apasionado del fútbol y buscas la mejor manera de seguir a tu equipo, has llegado al lugar indicado. 
                    En <strong>Roja Directa En Vivo</strong> nos especializamos en ofrecerte los mejores streams para que no te pierdas 
                    ni un solo detalle de la <strong>{hub.h1}</strong>.
                </p>
                
                <h3>¿Por qué elegir Roja Directa En Vivo?</h3>
                <p>
                    Nuestra plataforma destaca por su rapidez y sencillez. A diferencia de otros sitios, nosotros priorizamos la 
                    experiencia del usuario, minimizando la publicidad intrusiva y asegurando que los enlaces funcionen correctamente 
                    antes de cada encuentro.
                </p>
            </div>
        </article>


    </div>

</Layout>

<style>
    .schedule-box {
        background: #222;
        border-radius: 8px;
        overflow: hidden;
        margin-top: 2rem;
        border: 1px solid #333;
    }

    .schedule-header {
        background: #1a1a1a;
        color: #ffc107;
        padding: 1rem;
        text-align: center;
        font-weight: 800;
        font-size: 1.1rem;
        border-bottom: 2px solid #d32f2f;
    }

    .matches-list {
        background: white;
    }

    .no-matches {
        padding: 2rem;
        text-align: center;
        color: #666;
        background: white;
    }

    .hub-content {
        margin-top: 3rem;
        background: white;
        color: #333;
        padding: 2rem;
        border-radius: 8px;
        border-left: 5px solid #d32f2f;
    }

    .hub-content h2 {
        color: #d32f2f;
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }

    .hub-content h3 {
        margin: 1.5rem 0 0.5rem;
        font-size: 1.2rem;
    }

    .hub-content p {
        margin-bottom: 1rem;
        line-height: 1.8;
    }
</style>
