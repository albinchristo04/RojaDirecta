---
import Layout from '../../layouts/Layout.astro';
import MatchCard from '../../components/MatchCard.astro';
import { getMatches } from '../../utils/data';
import { getRotatingTitle } from '../../utils/seo';

export async function getStaticPaths() {
  const channels = [
    { slug: 'espn-en-vivo', name: 'ESPN' },
    { slug: 'fox-sports-en-vivo', name: 'Fox Sports' },
    { slug: 'movistar-deportes-en-vivo', name: 'Movistar Deportes' },
    { slug: 'directv-sports-en-vivo', name: 'DirecTV Sports' },
    { slug: 'tyc-sports-en-vivo', name: 'TyC Sports' }
  ];

  return channels.map((channel) => ({
    params: { slug: channel.slug },
    props: { channel },
  }));
}

const { channel } = Astro.props;
const matches = await getMatches();
const channelMatches = matches.slice(0, 10);

const title = getRotatingTitle(`Canal ${channel.name} En Vivo Gratis`, 'hub');
const description = `Sigue la señal del canal ${channel.name} en vivo gratis. Disfruta de toda la programación deportiva de ${channel.name} online en Roja Directa En Vivo.`;
---

<Layout title={title} description={description} headerTitle={`VER CANAL ${channel.name.toUpperCase()} EN VIVO`}>
    <div class="container">
        <div class="schedule-box">
            <div class="schedule-header">
                PARTIDOS TRANSMITIDOS POR {channel.name.toUpperCase()}
            </div>
            <div class="matches-list">
                {channelMatches.map((match) => (
                    <MatchCard match={match} />
                ))}
            </div>
        </div>

        <article class="channel-content">
            <div class="content-box">
                <h2>Sobre el canal {channel.name}</h2>
                <p>
                    El canal <strong>{channel.name}</strong> es uno de los líderes mundiales en transmisiones deportivas. 
                    Con derechos exclusivos para las ligas más importantes del mundo, es la opción preferida de millones de fans.
                </p>
            </div>
        </article>
    </div>
</Layout>

<style>
    .schedule-box {
        background: #222;
        border-radius: 8px;
        overflow: hidden;
        margin-top: 2rem;
        border: 1px solid #333;
    }

    .schedule-header {
        background: #1a1a1a;
        color: #ffc107;
        padding: 1rem;
        text-align: center;
        font-weight: 800;
        font-size: 1.1rem;
        border-bottom: 2px solid #d32f2f;
    }

    .matches-list {
        background: white;
    }

    .channel-content {
        margin-top: 3rem;
        background: white;
        color: #333;
        padding: 2rem;
        border-radius: 8px;
        border-left: 5px solid #d32f2f;
    }

    .channel-content h2 {
        color: #d32f2f;
        margin-bottom: 1rem;
        font-size: 1.5rem;
    }

    .channel-content p {
        line-height: 1.8;
    }
</style>
